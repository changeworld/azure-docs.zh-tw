---
title: Azure Vm 上的 SQL Server 的 SQL 弱點評定
description: 描述在 Azure 虛擬機器上執行之 SQL Server 資料庫的 SQL 弱點評定。
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 7ec931f87c22ff410e378119338b8f7c31b6d640
ms.sourcegitcommit: 65a4f2a297639811426a4f27c918ac8b10750d81
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/03/2020
ms.locfileid: "96563388"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Azure Vm 上的 SQL Server 的 SQL 弱點評定
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

SQL 弱點評估 (VA) 是一種容易設定的服務，可探索、追蹤及協助您補救潛在的資料庫弱點。 您可以使用它來為 Azure Vm 上的 SQL Server 主動改善您的資料庫安全性。 

弱點評定是 [Azure Defender FOR SQL](../../database/azure-defender-for-sql.md) 供應專案的一部分，這是 advanced sql 安全性功能的整合套件。 您可以透過 Azure 的中央 Azure Defender for SQL 入口網站或 Azure 資訊安全中心來存取和管理弱點評定。 

## <a name="overview"></a>概觀

SQL 弱點評估 (VA) 是提供安全性狀態可見度的服務。 弱點評定包含可採取動作的步驟來解決安全性問題，並增強您的資料庫安全性。 它可協助您： 

- 符合要求資料庫掃描報告的合規性需求。 
- 符合資料隱私權標準。 
- 監視難以追蹤變更的動態資料庫環境。 

弱點評定是一種掃描服務，採用規則的知識庫來標示安全性弱點。 它會反白顯示與最佳作法的偏差，例如錯誤配置、過多的許可權及未受保護的敏感性資料。 

這些規則是以 Microsoft 的最佳作法為基礎，並且著重于對資料庫和其重要資料造成最大風險的安全性問題。 其中涵蓋了資料庫層級的問題和伺服器層級的安全性問題，例如伺服器防火牆設定和伺服器層級許可權。 這些規則也代表各種不同管理機構要符合其合規性標準的要求。 

掃描結果包含可以解決個別問題的可操作步驟，並於合適的情況下提供自訂的補救指令碼。 您可以為您的環境自訂評量報告，方法是設定可接受的基準： 

- 許可權設定 
- 功能設定 
- 資料庫設定 

## <a name="enable-sql-va"></a>啟用 SQL VA

在電腦上啟用適用于 SQL Server 的 Azure Defender 以執行弱點評定。 

若要使用 Azure Defender 進行 SQL Server，請遵循下列步驟：

1. [安裝 SQL IaaS 代理程式擴充功能](sql-agent-extension-manually-register-single-vm.md)
1. [啟用 Log Analytics 代理程式的自動布建](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [啟用選用的安全中心方案](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

由於弱點評定是適用于 SQL 的 Azure Defender 的一部分，因此在您的虛擬機器上啟用 Azure Defender 之後，您的資料庫會每隔12小時自動掃描，以找出安全性弱點。 結果會傳送給 Azure 資訊安全中心，以集中匯總 Azure Defender for SQL 所保護的 SQL 資料資產。 

> [!NOTE]
> 掃描是輕量、安全，每個資料庫只需要幾秒鐘的時間就會執行，而且完全是唯讀的。 它不會對您的資料庫進行任何變更。 

## <a name="view-report"></a>檢視報表

資料庫報表會提供您的安全性狀態總覽。 它會列出找到的問題數量和其各自的嚴重性。 結果包含與安全性相關設定的偏差（例如資料庫主體和角色及其相關聯的許可權）之偏差的警告。  

若要查看報表，請遵循下列步驟：

1. 移至 Azure 入口網站中的 [Azure 資訊安全中心](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) 。
1. 選取 [**一般**] 功能表中的 [**建議**]： 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="從 Azure 入口網站的 Azure 資訊安全中心中的設定下移至建議":::

1. 向下滾動至建議，並展開 [ **補救弱點**]。
1. 在 **應補救電腦上的 SQL server 上，選擇弱點評定結果**。 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="在 Azure 資訊安全中心的建議分頁中查看報表":::

此頁面會顯示針對訂用帳戶中所有 SQL Server Vm 所識別的安全性弱點匯總。 


## <a name="analyze-results"></a>分析結果

檢查您的結果，並在報告中找出在您的環境中為真正安全性問題的結果。 向下鑽研至每個失敗的結果，了解調查結果的影響，以及每個安全性檢查失敗的原因。  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="檢查您的結果，並在報告中找出在您的環境中為真正安全性問題的結果。":::

## <a name="set-baseline"></a>設定比較基準 

當您檢查評量結果時，可以將結果標示為環境中可接受的基準。 基準本質上就是自訂報告結果的方式。 在後續的掃描中，會將符合基準的結果視為通過。 在您建立基準安全性狀態之後，弱點評定只會報告基準的偏差。 如此一來，您就可以專注于相關的問題。 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="當您檢查評量結果時，可以將結果標示為環境中可接受的基準。":::

## <a name="export-results"></a>匯出結果

使用 Azure 資訊安全中心的 [連續匯出](../../../security-center/continuous-export.md) 功能，將弱點評定結果匯出至 Azure 事件中樞或 Log Analytics 工作區。 


## <a name="next-steps"></a>後續步驟

若要深入瞭解，請參閱 [AZURE sql 中的 Sql 弱點評定](../../database/sql-vulnerability-assessment.md)，並 [使用 Azure 資訊安全中心來保護您的 sql 資料](../../../security-center/security-center-introduction.md)。

